# 競艇予測システムの精度向上プラン

## 概要

現在の予測システム（`enhanced_predictor.py`）は、専門的なルールに基づいた高度なロジックで構築されている。しかし、その精度と収益性をさらに向上させるため、機械学習の導入や新しいデータソースの活用を含む、以下の機能強化を提案する。

---

### [ ] 提案1：機械学習(ML)モデルの本格導入 (効果：大)

**現状の課題：**
- `enhanced_predictor.py`にはMLモデル（`advanced_ml_predictor`）を組み込む仕組みがあるが、モデルが存在せず、予測における重みも1%とごく僅か。実質的にMLの恩恵を受けられていない。

**提案内容：**
1.  **学習データの生成**: 過去のレース結果と出走表データ（選手、モーター、気象など）を組み合わせた訓練データセットを作成する。
2.  **モデルの訓練**: `scikit-learn`などを利用し、勾配ブースティングやランダムフォレストといったアルゴリズムで1着になる確率を予測するモデルを訓練する。
3.  **予測ロジックへの統合**:
    - 訓練済みモデルを `advanced_ml_predictor.py`として実装する。
    - `enhanced_predictor.py`の重み（`weights`）を調整し、ルールベースのスコアとMLスコアを適切な比率で組み合わせる（アンサンブル）。

**期待される効果:**
- 人間の専門家では気づきにくい複雑なデータパターンをモデルが自動で学習し、予測精度を5%〜10%向上させる。

---

### [ ] 提案2：オッズデータを活用した「バリューベット戦略」の導入 (効果：回収率向上)

**現状の課題：**
- 現在の予測ロジックは、市場の評価であるオッズを全く考慮していない。そのため、的中しても人気が高すぎて収益が低い（トリガミ）舟券を推奨してしまう可能性がある。

**提案内容：**
1.  **オッズデータの取得**: `previews` APIから、各舟券のオッズ情報をリアルタイムで取得する。
2.  **期待値の算出**: `期待値 = 自身が算出した的中確率 × オッズ` の計算式に基づき、すべての買い目の「うまみ」を数値化する。
3.  **推奨ロジックの変更**: 単純に的中確率が高い順で推奨するのではなく、期待値が1.0を大きく超える（例: 1.2以上）買い目を「バリューベット」として優先的に推奨する。

**期待される効果:**
- 的中率だけでなく、長期的な投資回収率(ROI)の向上に直接的に貢献する。
- 「実力以上に人気がない」オッズの歪みを見つけ出し、収益性の高い投票戦略を実現する。

---

### [ ] 提案3：新しい特徴量の追加と既存ロジックの高度化 (効果：中)

**現状の課題：**
- 選手の勝率やモーター性能など、基本的な特徴量はカバーされているが、レース展開に影響を与えるさらに細かい要因が不足している。

**提案内容：**
1.  **選手間相性の分析**: 過去の直接対決データを集計し、「A選手はB選手との競り合いに強い/弱い」といった相性情報を特徴量として追加する。
2.  **潮汐データとの統合**: 海に面した競艇場（丸亀、宮島など）向けに、潮の満ち引きデータを取得し、イン/アウトコースの有利不利を動的に補正する。
3.  **気象条件の分析強化**: 風の「向き」と「強さ」を組み合わせ、「向かい風5m以上なら1コースの信頼度が15%上昇する」といった、より具体的で詳細なルールを気象補正ロジックに追加する。

**期待される効果:**
- これまで捉えきれていなかった要因を分析に加えることで、予測の解像度を高め、特に特殊な条件下での精度を向上させる。

---

## 推奨される進め方

まずは最も効果が大きいと期待される**「提案1：機械学習(ML)モデルの本格導入」**から着手することを推奨する。
